<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="indy2kro" /><link rel="canonical" href="https://indy2kro.github.io/php-epub/Parser/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Parser - PHP EPUB</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Parser";
        var mkdocs_page_input_path = "Parser.md";
        var mkdocs_page_url = "/php-epub/Parser/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PHP EPUB
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../index.md">Index</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../installation.md">Installation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basic-usage/">Basic Usage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced-usage/">Advanced Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Classes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../epub-file/">EpubFile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../content-manager/">ContentManager</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../metadata.md">Metadata</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../spine.md">Spine</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../parser.md">Parser</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../xml-parser/">XmlParser</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../zip-handler/">ZipHandler</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../converter.md">Converter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Converters</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../converters/calibre-adapter/">Calibre Adapter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../converters/dompdf-adapter/">Dompdf Adapter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../converters/tcpdf-adapter/">TCPDF Adapter</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PHP EPUB</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Parser</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="parser">Parser<a class="headerlink" href="#parser" title="Permanent link">&para;</a></h1>
<p>The <code>Parser</code> class in the PHP EPUB Processor library is responsible for parsing the structure of an EPUB file.
It validates the essential components of the EPUB, such as the mimetype, OPF, and NCX files,
ensuring that the EPUB file is correctly structured and ready for further processing.</p>
<h2 id="key-methods">Key Methods<a class="headerlink" href="#key-methods" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><strong><code>__construct(XmlParser $xmlParser = new XmlParser())</code></strong>: Initializes the <code>Parser</code> with an <code>XmlParser</code> instance, which is used for XML parsing tasks.</p>
</li>
<li>
<p><strong><code>parse(string $directory): string</code></strong>: Parses the EPUB file structure within the specified directory. It validates the mimetype, extracts the OPF path from the container, and validates the OPF file. Returns the path to the OPF file.</p>
</li>
<li>
<p><strong><code>validateMimetype(string $directory): void</code></strong>: Validates the presence and content of the mimetype file, ensuring it is correctly set to <code>application/epub+zip</code>.</p>
</li>
<li>
<p><strong><code>extractOpfPath(string $containerPath): string</code></strong>: Extracts the OPF file path from the <code>container.xml</code> file, which defines the location of the OPF file within the EPUB.</p>
</li>
<li>
<p><strong><code>validateOpf(string $opfPath): void</code></strong>: Validates the OPF file and checks for the presence of the NCX file, ensuring the EPUB's manifest and navigation are correctly defined.</p>
</li>
<li>
<p><strong><code>validateNcx(string $ncxPath): void</code></strong>: Validates the NCX file, ensuring it contains a valid <code>navMap</code> element for navigation.</p>
</li>
</ul>
<h2 id="usage-example">Usage Example<a class="headerlink" href="#usage-example" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code class="language-php">use PhpEpub\Parser;
use PhpEpub\XmlParser;

$directory = '/path/to/extracted/epub';
$parser = new Parser(new XmlParser());

try {
    $opfPath = $parser-&gt;parse($directory);
    echo &quot;OPF file located at: $opfPath&quot;;
} catch (Exception $e) {
    echo &quot;Error parsing EPUB: &quot; . $e-&gt;getMessage();
}
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
